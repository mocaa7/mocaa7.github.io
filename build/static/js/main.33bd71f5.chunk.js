(this["webpackJsonpwbdv-sp-20-mocaa7-client-react"]=this["webpackJsonpwbdv-sp-20-mocaa7-client-react"]||[]).push([[0],{11:function(e,t,n){},16:function(e,t,n){},36:function(e,t,n){"use strict";(function(e){var a=n(19),r=n(3),s=n(4),i=n(6),o=n(5),c=n(7),u=n(0),l=n.n(u),d=(n(9),n(10),n(16),function(t){function n(e){var t;return Object(r.a)(this,n),(t=Object(i.a)(this,Object(o.a)(n).call(this,e))).state={isEditing:!1,title:e.module.title},t}return Object(c.a)(n,t),Object(s.a)(n,[{key:"onEdit",value:function(){this.setState({isEditing:!0}),this.props.onSelect()}},{key:"onChange",value:function(e){this.setState({title:e.target.value})}},{key:"onSave",value:function(){var e=Object(a.a)({},this.props.module,{title:this.state.title});this.props.onSave(e),this.setState({isEditing:!1})}},{key:"render",value:function(){var t=this;return l.a.createElement("li",{className:"list-group-item wbdv-module-item wbdv-module-item-title\n        ".concat(this.props.isSelected?"active":""),onClick:function(){return t.props.onSelect()},key:e._id},!this.state.isEditing&&l.a.createElement("div",null,l.a.createElement("span",null,this.state.title),l.a.createElement("span",{className:"float-right"},l.a.createElement("i",{className:"fa fa-pencil fa-2x",onClick:function(){return t.onEdit()}}))),this.state.isEditing&&l.a.createElement("div",null,l.a.createElement("input",{type:"text",className:"typing-container",value:this.state.title,onChange:function(e){return t.onChange(e)}}),l.a.createElement("span",{className:"float-right"},l.a.createElement("i",{className:"fa fa-trash fa-2x",onClick:function(){return t.props.onDelete()}}),l.a.createElement("i",{className:"fa fa-check fa-2x",onClick:function(){return t.onSave()}}))))}}]),n}(l.a.Component));t.a=d}).call(this,n(34)(e))},38:function(e,t,n){e.exports=n(50)},43:function(e,t,n){},44:function(e,t,n){e.exports=n.p+"static/media/logo.49f98c8e.svg"},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(26),i=n.n(s),o=(n(43),n(9),n(44),n(1)),c=n.n(o),u=n(2),l=n(3),d=n(4),p=n(6),h=n(5),m=n(7),f=n(23),v=n(22),g=(n(10),n(11),"https://wbdv-generic-server.herokuapp.com/api/001367674/courses"),w=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"createCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g,{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAllCourses",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g);case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"findCourseById",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=(n(16),n(25)),b=n(17),y=n(18),O=function(e,t){return{title:"New Module",_id:(new Date).getTime()+"",courseId:t,type:"CREATE_MODULE",newModule:e}},k=function(e){return{type:"DELETE_MODULE",moduleId:e}},C=function(e){return{type:"FIND_ALL_MODULES_FOR_COURSE",modules:e}},x=function(e){return{title:e.title,type:"UPDATE_MODULE",module:e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{modules:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIND_ALL_MODULES_FOR_COURSE":return{modules:t.modules};case"CREATE_MODULE":return{modules:[].concat(Object(y.a)(e.modules),[t.newModule])};case"DELETE_MODULE":return{modules:e.modules.filter((function(e){return e._id!==t.moduleId}))};case"UPDATE_MODULE":return{modules:e.modules.map((function(e){return e._id===t.moduleId?t.module:e}))};default:return e}},S=function(e,t){return{title:"New Lesson",_id:(new Date).getTime()+"",moduleId:e,type:"CREATE_LESSON",newLesson:t}},N=function(e){return{type:"DELETE_LESSON",lessonId:e}},I=function(e){return{type:"FIND_ALL_LESSONS_FOR_MODULE",lessons:e}},T=function(e){return{title:e.title,type:"UPDATE_LESSON",lesson:e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lessons:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIND_ALL_LESSONS_FOR_MODULE":return{lessons:t.lessons};case"CREATE_LESSON":return{lessons:[].concat(Object(y.a)(e.lessons),[t.newLesson])};case"DELETE_LESSON":return{lessons:e.lessons.filter((function(e){return e._id!==t.lessonId}))};case"UPDATE_LESSON":return{lessons:e.lessons.map((function(e){return e._id===t.lessonId?t.lesson:e}))};default:return e}},D=function(e){return{type:"CREATE_TOPIC",newTopic:e}},W=function(e){return{type:"DELETE_TOPIC",topicId:e}},_=function(e){return{type:"FIND_ALL_TOPICS_FOR_LESSON",topics:e}},P=function(e){return{type:"UPDATE_TOPIC",topic:e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{topics:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIND_ALL_TOPICS_FOR_LESSON":return{topics:t.topics};case"CREATE_TOPIC":return{topics:[].concat(Object(y.a)(e.topics),[t.newTopic])};case"DELETE_TOPIC":return{topics:e.topics.filter((function(e){return e.id!==t.topicId}))};case"UPDATE_TOPIC":return{topics:e.topics.map((function(e){return e.id===t.topic.id?t.topic:e}))};default:return e}},U=function(e,t){return{name:"New Widget",widgetType:"Heading",id:t,topicId:e,type:"CREATE_WIDGET"}},A=function(e){return{type:"DELETE_WIDGET",widgetId:e}},F=function(e){return{type:"FIND_ALL_WIDGETS_FOR_TOPIC",widgets:e}},H=function(e){return{type:"UPDATE_WIDGET",widget:e}},R=function(e,t){return{type:"MOVE_WIDGET_UP",widget:e,other:t}},z=function(e,t){return{type:"MOVE_WIDGET_DOWN",widget:e,other:t}},V=function(e){return{widgets:e,type:"SAVE_ALL_WIDGETS"}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgets:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIND_ALL_WIDGETS_FOR_TOPIC":return{widgets:t.widgets};case"CREATE_WIDGET":return{widgets:[].concat(Object(y.a)(e.widgets),[{name:t.name,widgetType:t.widgetType,id:t.id}])};case"DELETE_WIDGET":return{widgets:e.widgets.filter((function(e){return e.id!==t.widgetId}))};case"UPDATE_WIDGET":return{widgets:e.widgets.map((function(e){return e.id===t.widget.id?t.widget:e}))};case"MOVE_WIDGET_UP":return t.widget.widgetOrder--,t.other.widgetOrder++,{widgets:e.widgets.map((function(e){return e.id===t.other.id?t.widget:e.id===t.widget.id?t.other:e}))};case"MOVE_WIDGET_DOWN":return t.widget.widgetOrder++,t.other.widgetOrder--,{widgets:e.widgets.map((function(e){return e.id===t.widget.id?t.other:e.id===t.other.id?t.widget:e}))};case"SAVE_ALL_WIDGETS":return{widgets:t.widgets};default:return e}},J="https://wbdv-generic-server.herokuapp.com/api/001367674/courses",B="https://wbdv-generic-server.herokuapp.com/api/001367674/modules",$=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"createModule",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/").concat(t,"/modules"),{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findModulesForCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/").concat(t,"/modules"));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getModule",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(B,"/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateModule",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(B,"/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteModule",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(B,"/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),q=n(36),K=new $,Q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={selectedModuleId:e.curModuleId,modules:[]},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateModules()}},{key:"updateModules",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.findModulesForCourse(this.props.courseId);case 2:t=e.sent,this.setState({modules:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addModule",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.createModule(this.props.courseId);case 2:return e.next=4,this.updateModules();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelect",value:function(e){this.setState({selectedModuleId:e}),this.props.history.push("/course/".concat(this.props.courseId,"/module/").concat(e))}},{key:"onDelete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selectedModuleId:t}),e.next=3,this.props.deleteModule(t);case 3:return e.next=5,this.updateModules();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.updateModule(t,n);case 2:return e.next=4,this.updateModules();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group"},this.state.modules&&this.state.modules.map((function(t){return r.a.createElement(q.a,{key:t._id,isSelected:t._id===e.state.selectedModuleId,module:t,onSelect:e.onSelect.bind(e,t._id),onDelete:e.onDelete.bind(e,t._id),onSave:e.onSave.bind(e,t._id)})}))),r.a.createElement("i",{className:"fa fa-plus-circle fa-3x wbdv-add",onClick:function(){return e.addModule()}}))}}]),t}(r.a.Component),X=Object(b.b)((function(e){return{modules:e.modules.modules}}),(function(e){return{createModule:function(t){return K.createModule(t,{title:"New module"}).then((function(n){return e(O(n,t))}))},findAllModulesForCourse:function(t){return K.findModulesForCourse(t).then((function(t){return e(C(t))}))},updateModule:function(t,n){return K.updateModule(t,n).then((function(t){return e(x(t))}))},deleteModule:function(t){return K.deleteModule(t).then((function(n){return e(k(t))}))}}}))(Q),Y="https://wbdv-generic-server.herokuapp.com/api/001367674/lessons",Z=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"createLesson",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://wbdv-generic-server.herokuapp.com/api/001367674/modules","/").concat(t,"/lessons"),{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findLessonsForModule",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://wbdv-generic-server.herokuapp.com/api/001367674/modules","/").concat(t,"/lessons"));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateLesson",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Y,"/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLesson",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Y,"/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ee=n(19),te=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isEditing:!1,title:e.lesson.title},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onEdit",value:function(){this.setState({isEditing:!0}),this.props.onSelect()}},{key:"onChange",value:function(e){this.setState({title:e.target.value})}},{key:"onSave",value:function(){var e=Object(ee.a)({},this.props.lesson,{title:this.state.title});this.props.onSave(e),this.setState({isEditing:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"nav-item nav-link ".concat(this.props.isSelected?"active":""),onClick:function(){return e.props.onSelect()},key:this.props.lesson._id},!this.state.isEditing&&r.a.createElement("div",null,this.state.title,r.a.createElement("i",{className:"fa fa-pencil",onClick:function(){return e.onEdit()}})),this.state.isEditing&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"typing-container",value:this.state.title,onChange:function(t){return e.onChange(t)}}),r.a.createElement("span",{className:"float-right"},r.a.createElement("i",{className:"fa fa-trash",onClick:function(){return e.props.onDelete()}}),r.a.createElement("i",{className:"fa fa-check",onClick:function(){return e.onSave()}}))))}}]),t}(r.a.Component),ne=new Z,ae=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={selectedLessonId:e.curLessonId,lessons:[]},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateLessons()}},{key:"componentDidUpdate",value:function(e){e.moduleId!==this.props.moduleId&&this.updateLessons()}},{key:"updateLessons",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.findLessonsForModule(this.props.moduleId);case 2:t=e.sent,this.setState({lessons:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addLesson",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.createLesson(this.props.moduleId);case 2:this.updateLessons();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelect",value:function(e){this.setState({selectedLessonId:e}),this.props.history.push("/course/".concat(this.props.courseId,"/module/").concat(this.props.moduleId,"/lesson/").concat(e))}},{key:"onDelete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selectedLessonId:t}),e.next=3,this.props.deleteLesson(t);case 3:return e.next=5,this.updateLessons();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.updateLesson(t,n);case 2:return e.next=4,this.updateLessons();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"nav nav-tabs wbdv-margin-below wbdv-category"},this.state.lessons&&this.state.lessons.map((function(t){return r.a.createElement(te,{key:t._id,isSelected:t._id===e.state.selectedLessonId,lesson:t,onSelect:e.onSelect.bind(e,t._id),onDelete:e.onDelete.bind(e,t._id),onSave:e.onSave.bind(e,t._id)})})),r.a.createElement("li",{className:"nav-item",onClick:function(){return e.addLesson()}},r.a.createElement("i",{className:"nav-link fa fa-plus-circle fa-2x"})))}}]),t}(r.a.Component),re=Object(b.b)((function(e){return{lessons:e.lessons.lessons}}),(function(e){return{createLesson:function(t){return ne.createLesson(t,{title:"New lesson"}).then((function(n){return e(S(n,t))}))},findAllLessonsForModule:function(t){return ne.findLessonsForModule(t).then((function(t){return e(I(t))}))},updateLesson:function(t,n){return ne.updateLesson(t,n).then((function(t){return e(T(t))}))},deleteLesson:function(t){return ne.deleteLesson(t).then((function(n){return e(N(t))}))}}}))(ae),se=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"createTopic",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/lessons/").concat(t,"/topics"),{method:"POST",headers:{"content-type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"findTopicsForLesson",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/lessons/").concat(t,"/topics"));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAllTopics",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"findTopicById",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTopic",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteTopic",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ie=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isEditing:!1,title:e.topic.title},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onEdit",value:function(){this.setState({isEditing:!0}),this.props.onSelect()}},{key:"onChange",value:function(e){this.setState({title:e.target.value})}},{key:"onSave",value:function(){var e=Object(ee.a)({},this.props.topic,{title:this.state.title});this.props.onSave(e),this.setState({isEditing:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"nav-item nav-link ".concat(this.props.isSelected?"active":""),onClick:function(){return e.props.onSelect()},key:this.props.topic.id},!this.state.isEditing&&r.a.createElement("div",null,this.state.title,r.a.createElement("i",{className:"fa fa-pencil",onClick:function(){return e.onEdit()}})),this.state.isEditing&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"typing-container",value:this.state.title,onChange:function(t){return e.onChange(t)}}),r.a.createElement("span",{className:"float-right"},r.a.createElement("i",{className:"fa fa-trash",onClick:function(){return e.props.onDelete()}}),r.a.createElement("i",{className:"fa fa-check",onClick:function(){return e.onSave()}}))))}}]),t}(r.a.Component),oe=new se,ce=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={selectedTopicId:e.curTopicId,topics:[]},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateTopics()}},{key:"componentDidUpdate",value:function(e){e.lessonId!==this.props.lessonId&&this.updateTopics()}},{key:"updateTopics",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.findTopicsForLesson(this.props.lessonId);case 2:t=e.sent,this.setState({topics:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addTopic",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.createTopic(this.props.lessonId);case 2:this.updateTopics();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelect",value:function(e){this.setState({selectedTopicId:e}),this.props.history.push("/course/".concat(this.props.courseId,"/module/").concat(this.props.moduleId,"/lesson/").concat(this.props.lessonId,"/topic/").concat(e))}},{key:"onDelete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selectedTopicId:t}),e.next=3,this.props.deleteTopic(t);case 3:return e.next=5,this.updateTopics();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.updateTopic(t,n);case 2:return e.next=4,this.updateTopics();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"nav nav-pills wbdv-margin-below wbdv-category"},this.state.topics&&this.state.topics.map((function(t){return r.a.createElement(ie,{key:t.id,isSelected:t.id===e.state.selectedTopicId,topic:t,onSelect:e.onSelect.bind(e,t.id),onDelete:e.onDelete.bind(e,t.id),onSave:e.onSave.bind(e,t.id)})})),r.a.createElement("li",{className:"nav-item",onClick:function(){return e.addTopic()}},r.a.createElement("i",{className:"nav-link fa fa-plus-circle fa-2x"})))}}]),t}(r.a.Component),ue=Object(b.b)((function(e){return{topics:e.topics.topics}}),(function(e){return{createTopic:function(t){return oe.createTopic(t).then((function(t){return e(D(t))}))},findAllTopicsForLesson:function(t){return oe.findTopicsForLesson(t).then((function(t){return e(_(t))}))},updateTopic:function(t,n){return oe.updateTopic(t,n).then((function(t){return e(P(t))}))},deleteTopic:function(t){return oe.deleteTopic(t).then((function(n){return e(W(t))}))}}}))(ce),le=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"createWidget",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics/").concat(t,"/widgets"),{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWidgetsForTopic",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics/").concat(t,"/widgets"));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateWidget",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/widgets/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteWidget",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/widgets/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAllWidgets",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/topics/").concat(t,"/widgets"),{method:"PUT",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findAllWidgets",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/widgets"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"findWidgetById",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://serene-island-60523.herokuapp.com/api","/widgets/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),de=function(e){var t=e.type,n=e.widget,a=e.widgetOrder,s=e.getLastElement,i=e.moveUp,o=e.moveDown,c=e.updateWidget,u=e.onDelete;return r.a.createElement("div",{className:"row wbdv-margin-below col-sm-11"},r.a.createElement("h3",{className:"wbdv-heading-widget"},t," Widget"),r.a.createElement("div",{className:"col wbdv-edit-widget"},r.a.createElement("div",{className:"row row-right"},a>0&&r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-dark wbdv-arrow col-sm-1",onClick:function(){return i()},key:n.id},r.a.createElement("i",{className:"fa fa-arrow-up pt-1 fa-1x"})),a<s()&&r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-dark wbdv-arrow col-sm-1",onClick:function(){return o()},key:n},r.a.createElement("i",{className:"fa fa-arrow-down pt-1 fa-1x"})),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("select",{className:"form-control",defaultValue:t,onChange:function(e){return c(function(e,t,n){switch(n){case"Paragraph":return function(e,t){return{id:e,name:"",widgetType:"Paragraph",widgetOrder:t,width:-1,height:-1,cssClass:"",style:"",value:"",text:""}}(e,t);case"Image":return function(e,t){return{id:e,name:"",widgetType:"Image",widgetOrder:t,width:-1,height:-1,cssClass:"",style:"",value:"",url:""}}(e,t);case"List":return function(e,t){return{id:e,name:"",widgetType:"List",widgetOrder:t,width:-1,height:-1,cssClass:"",style:"",value:"",items:[],ordered:!1}}(e,t);default:return function(e,t){return{id:e,name:"",widgetType:"Heading",widgetOrder:t,width:-1,height:-1,cssClass:"",style:"",value:"",text:"",size:1}}(e,t)}}(n.id,a,e.target.value))}},r.a.createElement("option",null,"Heading"),r.a.createElement("option",null,"Paragraph"),r.a.createElement("option",null,"Image"),r.a.createElement("option",null,"List"))),r.a.createElement("i",{className:"fa fa-times fa-2x pt-1 pr-2",onClick:function(){return u()}}))))},pe=function(e){var t=e.size,n=e.text;return r.a.createElement("div",{className:"form-group row"},1===t&&r.a.createElement("h1",null,n),2===t&&r.a.createElement("h2",null,n),3===t&&r.a.createElement("h3",null,n),4===t&&r.a.createElement("h4",null,n),5===t&&r.a.createElement("h5",null,n),6===t&&r.a.createElement("h6",null,n))},he=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={widget:e.widget,size:e.size,name:e.name,text:e.text,widgetOrder:e.widgetOrder},n.state.widget.size=n.props.size,n.state.widget.name=n.props.name,n.state.widget.text=n.props.text,n.state.widget.widgetOrder=n.props.widgetOrder,n.state.widget.widgetType="Heading",n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"updateWidgetContent",value:function(e){this.state.widget.text=e,this.props.updateWidget(this.state.widget),this.setState({text:e})}},{key:"updateHeadingSize",value:function(e){var t=e[e.length-1],n=parseInt(t);this.state.widget.size=n,this.props.updateWidget(this.state.widget),this.setState({size:n})}},{key:"updateWidgetName",value:function(e){this.state.widget.name=e,this.props.updateWidget(this.state.widget),this.setState({name:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,!this.props.isPreviewing&&r.a.createElement("span",null,r.a.createElement(de,{key:this.props.widget.id,type:"Heading",widget:this.props.widget,widgetOrder:this.props.widgetOrder,getLastElement:this.props.getLastElement,moveUp:this.props.moveUp,moveDown:this.props.moveDown,updateWidget:this.props.updateWidgetType,onDelete:this.props.onDelete}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control wbdv-placeholder",placeholder:"Heading text",defaultValue:this.props.text,onChange:function(t){return e.updateWidgetContent(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("select",{className:"form-control",defaultValue:"Heading ".concat(this.props.size),onChange:function(t){return e.updateHeadingSize(t.target.value)}},r.a.createElement("option",null,"Heading 1"),r.a.createElement("option",null,"Heading 2"),r.a.createElement("option",null,"Heading 3"),r.a.createElement("option",null,"Heading 4"),r.a.createElement("option",null,"Heading 5"),r.a.createElement("option",null,"Heading 6")))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control wbdv-placeholder",defaultValue:this.props.name,placeholder:"Widget name",onChange:function(t){return e.updateWidgetName(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("h4",{className:"col-sm-10"},"Preview"))),r.a.createElement(pe,{size:this.state.size,text:this.state.text}))}}]),t}(r.a.Component),me=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={widget:e.widget,text:e.text,name:e.name,widgetOrder:e.widgetOrder},n.state.widget.name=n.props.name,n.state.widget.text=n.props.text,n.state.widget.widgetOrder=n.props.widgetOrder,n.state.widget.widgetType="Paragraph",n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"updateWidgetContent",value:function(e){this.state.widget.text=e,this.props.updateWidget(this.state.widget),this.setState({text:e})}},{key:"updateWidgetName",value:function(e){this.state.widget.name=e,this.props.updateWidget(this.state.widget),this.setState({name:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,!this.props.isPreviewing&&r.a.createElement("span",null,r.a.createElement(de,{key:this.props.widget.id,type:"Paragraph",widget:this.props.widget,widgetOrder:this.props.widgetOrder,getLastElement:this.props.getLastElement,moveUp:this.props.moveUp,moveDown:this.props.moveDown,updateWidget:this.props.updateWidgetType,onDelete:this.props.onDelete}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{type:"text",className:"form-control wbdv-placeholder",placeholder:"Paragraph text",defaultValue:this.props.text,onChange:function(t){return e.updateWidgetContent(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control wbdv-placeholder",placeholder:"Widget name",defaultValue:this.state.name,onChange:function(t){return e.updateWidgetName(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("h4",{className:"col-sm-10"},"Preview"))),r.a.createElement("div",{className:"form-group row"},this.state.text))}}]),t}(r.a.Component),fe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={widget:e.widget,items:e.items||[],name:e.name,ordered:e.widget.ordered,widgetOrder:e.widgetOrder},n.state.widget.name=n.props.name,n.state.widget.items=n.props.items,n.state.widget.widgetOrder=n.props.widgetOrder,n.state.widget.widgetType="List",n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"updateWidgetItems",value:function(e){var t=e?e.split("\n"):[];this.state.widget.items=t,this.props.updateWidget(this.state.widget),this.setState({items:t})}},{key:"updateWidgetName",value:function(e){this.state.widget.name=e,this.props.updateWidget(this.state.widget),this.setState({name:e})}},{key:"changeOrder",value:function(e){var t="Ordered list"===e;this.state.widget.ordered=t,this.props.updateWidget(this.state.widget),this.setState({ordered:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,!this.props.isPreviewing&&r.a.createElement("span",null,r.a.createElement(de,{key:this.props.widget.id,type:"List",widget:this.props.widget,widgetOrder:this.props.widgetOrder,getLastElement:this.props.getLastElement,moveUp:this.props.moveUp,moveDown:this.props.moveDown,updateWidget:this.props.updateWidgetType,onDelete:this.props.onDelete}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{type:"text",className:"form-control wbdv-placeholder",placeholder:"Enter one list item per line",defaultValue:this.props.items.join("\n"),onChange:function(t){return e.updateWidgetItems(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("select",{className:"form-control",defaultValue:this.state.ordered?"Ordered list":"Unordered list",onChange:function(t){return e.changeOrder(t.target.value)}},r.a.createElement("option",null,"Ordered list"),r.a.createElement("option",null,"Unordered list")))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control wbdv-placeholder",placeholder:"Widget name",defaultValue:this.state.name,onChange:function(t){return e.updateWidgetName(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("h4",{className:"col-sm-10"},"Preview"))),r.a.createElement("div",{className:"form-group row"},this.state.items&&r.a.createElement("span",null,this.state.ordered&&r.a.createElement("ol",null,this.state.items.map((function(e){return r.a.createElement("li",null,e)}))),!this.state.ordered&&r.a.createElement("ul",null,this.state.items.map((function(e){return r.a.createElement("li",null,e)}))))))}}]),t}(r.a.Component),ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={widget:e.widget,name:e.name,url:e.url,widgetOrder:e.widgetOrder},n.state.widget.name=n.props.name,n.state.widget.url=n.props.url,n.state.widget.widgetOrder=n.props.widgetOrder,n.state.widget.widgetType="Image",n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"updateWidgetUrl",value:function(e){this.state.widget.url=e,this.props.updateWidget(this.state.widget),this.setState({url:e})}},{key:"updateWidgetName",value:function(e){this.state.widget.name=e,this.props.updateWidget(this.state.widget),this.setState({name:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,!this.props.isPreviewing&&r.a.createElement("span",null,r.a.createElement(de,{key:this.props.widget.id,type:"Image",widget:this.props.widget,widgetOrder:this.props.widgetOrder,getLastElement:this.props.getLastElement,moveUp:this.props.moveUp,moveDown:this.props.moveDown,updateWidget:this.props.updateWidgetType,onDelete:this.props.onDelete}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control wbdv-placeholder",placeholder:"Image URL",defaultValue:this.props.url,onChange:function(t){return e.updateWidgetUrl(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control wbdv-placeholder",defaultValue:this.props.name,placeholder:"Widget name",onChange:function(t){return e.updateWidgetName(t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("h4",{className:"col-sm-10"},"Preview"))),r.a.createElement("img",{src:this.state.url}))}}]),t}(r.a.Component),ge=function(e){var t=e.saveAll,n=e.isPreviewing,a=e.updatePreview;return r.a.createElement("div",{className:"row col-sm-10"},r.a.createElement("div",{id:"wbdv-preview"},r.a.createElement("button",{type:"button",className:"btn btn-success",id:"wbdv-save",onClick:function(){return t()}},"Save All")),r.a.createElement("div",{className:"custom-control custom-switch wbdv-preview"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input wbdv-preview-icon",id:"customSwitch",checked:n,onChange:function(){return a()}}),r.a.createElement("label",{className:"custom-control-label wbdv-preview",htmlFor:"customSwitch"},"Preview")))},we=new le,Ee="Heading",be=1,ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={widgets:[],nextId:-1,isPreviewing:!1},n.updateWidgets(),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"getLastElement",value:function(){return this.state.widgets.length-1}},{key:"componentDidUpdate",value:function(e){e.topicId!==this.props.topicId&&this.updateWidgets()}},{key:"onSaveAll",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.saveAllWidgets(this.props.topicId,this.state.widgets);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateWidgets",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.findWidgetsForTopic(this.props.topicId);case 2:t=e.sent,this.setState({widgets:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addWidget",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.nextId,this.setState({nextId:--this.state.nextId}),a=t,r=this.state.widgets.length,n={id:a,name:"",widgetType:Ee,widgetOrder:r,width:-1,height:-1,cssClass:"",style:"",value:"",text:"",size:be},this.setState({widgets:[].concat(Object(y.a)(this.state.widgets),[n])});case 4:case"end":return e.stop()}var a,r}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){var t=this.state.widgets.filter((function(t){return t.id!==e}));this.setState({widgets:t})}},{key:"swapElements",value:function(e,t,n){var a=e[t];return e[t]=e[n],e[n]=a,e[t].widgetOrder=t,e[n].widgetOrder=n,e}},{key:"moveUp",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.widgets.indexOf(t),this.setState({widgets:this.swapElements(this.state.widgets,n,n-1)});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"moveDown",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.widgets.indexOf(t),this.setState({widgets:this.swapElements(this.state.widgets,n,n+1)});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateWidget",value:function(e){this.setState({widgets:this.state.widgets.map((function(t){return t.id===e.id?e:t}))})}},{key:"updatePreview",value:function(){this.setState({isPreviewing:!this.state.isPreviewing})}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement(ge,{key:this.props.topicId,saveAll:this.onSaveAll.bind(this),isPreviewing:this.state.isPreviewing,updatePreview:this.updatePreview.bind(this)}),r.a.createElement("div",null,this.state.widgets&&this.state.widgets.map((function(t,n){return r.a.createElement("div",null,r.a.createElement("div",{className:"col container fluid wbdv-widget info"},(!t.widgetType||t.widgetType===Ee)&&r.a.createElement(he,{key:t.id,widget:t,widgetOrder:n,getLastElement:e.getLastElement.bind(e),moveUp:e.moveUp.bind(e,t),moveDown:e.moveDown.bind(e,t),onDelete:e.onDelete.bind(e,t.id),size:t.size?t.size:be,name:t.name||"",text:t.text||"",updateWidget:e.updateWidget.bind(e,t),updateWidgetType:e.updateWidget.bind(e),isPreviewing:e.state.isPreviewing}),"Paragraph"===t.widgetType&&r.a.createElement(me,{key:t.id,widget:t,widgetOrder:n,getLastElement:e.getLastElement.bind(e),moveUp:e.moveUp.bind(e,t),moveDown:e.moveDown.bind(e,t),onDelete:e.onDelete.bind(e,t.id),name:t.name||"",text:t.text||"",updateWidget:e.updateWidget.bind(e,t),updateWidgetType:e.updateWidget.bind(e),isPreviewing:e.state.isPreviewing}),"List"===t.widgetType&&r.a.createElement(fe,{key:t.id,widget:t,widgetOrder:n,getLastElement:e.getLastElement.bind(e),moveUp:e.moveUp.bind(e,t),moveDown:e.moveDown.bind(e,t),onDelete:e.onDelete.bind(e,t.id),name:t.name||"",items:t.items||"",updateWidget:e.updateWidget.bind(e,t),updateWidgetType:e.updateWidget.bind(e),isPreviewing:e.state.isPreviewing}),"Image"===t.widgetType&&r.a.createElement(ve,{key:t.id,widget:t,widgetOrder:n,getLastElement:e.getLastElement.bind(e),moveUp:e.moveUp.bind(e,t),moveDown:e.moveDown.bind(e,t),onDelete:e.onDelete.bind(e,t.id),name:t.name||"",url:t.url||"",updateWidget:e.updateWidget.bind(e,t),updateWidgetType:e.updateWidget.bind(e),isPreviewing:e.state.isPreviewing})))})),!this.state.isPreviewing&&r.a.createElement("div",{className:"nav-item",onClick:function(){return e.addWidget()}},r.a.createElement("i",{className:"nav-link fa fa-plus-circle fa-2x"}))))}}]),t}(r.a.Component),Oe=Object(b.b)((function(e){return{widgets:e.widgets.widgets}}),(function(e){return{createWidget:function(t,n){return e(U(t,n))},findAllWidgetsForTopic:function(t){return we.findWidgetsForTopic(t).then((function(t){return e(F(t))}))},updateWidget:function(t){return e(H(t))},deleteWidget:function(t){return e(A(t))},saveAllWidgets:function(t,n){return we.saveAllWidgets(t,n).then((function(t){return e(V(t))}))},moveWidgetUp:function(t,n){return e(R(t,n))},moveWidgetDown:function(t,n){return e(z(t,n))}}}))(ye),ke=Object(E.b)({modules:j,lessons:L,topics:M,widgets:G}),Ce=Object(E.c)(ke),xe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={selectedCourseId:e.courseId,curPath:e.history.location.pathname},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"closeEditor",value:function(){this.props.hideCourseEditor(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{store:Ce},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark text-white wbdv-margin-below wbdv-nav"},r.a.createElement("button",{className:"btn btn-sm pr-4 wbdv-white-icon wbdv-course-editor wbdv-close",onClick:function(){return e.closeEditor()}},r.a.createElement("i",{className:"fa fa-times pt-1 fa-1.6x"})),r.a.createElement("h2",null,"Course Editor ",this.props.courseTitle)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("h4",null,"Module List"),r.a.createElement(X,{curModuleId:this.props.moduleId,courseId:this.props.courseId,history:this.props.history})),this.props.match.params.moduleId&&r.a.createElement("div",{className:"col-8 container fluid wbdv-module-info"},r.a.createElement("h5",null,"Lesson Tabs"),r.a.createElement(re,{curLessonId:this.props.lessonId,moduleId:this.props.moduleId,courseId:this.props.courseId,history:this.props.history}),this.props.match.params.lessonId&&r.a.createElement("div",{className:"col container fluid"},r.a.createElement("h5",null,"Topic List"),r.a.createElement(ue,{curTopicId:this.props.topicId,lessonId:this.props.lessonId,moduleId:this.props.moduleId,courseId:this.props.courseId,history:this.props.history}),this.props.match.params.topicId&&r.a.createElement("span",null,r.a.createElement(Oe,{topicId:this.props.topicId,lessonId:this.props.lessonId,moduleId:this.props.moduleId,courseId:this.props.courseId,history:this.props.history})))))))}}]),t}(r.a.Component),je=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isEditing:!1,title:e.course.title,course:e.course},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onSaveCourse",value:function(){var e=Object(ee.a)({},this.props.course,{title:this.state.title});this.props.saveCourse(e,e._id),this.setState({isEditing:!1})}},{key:"onChange",value:function(e){this.setState({title:e.target.value})}},{key:"onEdit",value:function(){this.setState({isEditing:!0})}},{key:"deleteCourse",value:function(){this.props.deleteCourse(this.state.course),this.setState({title:"",course:null})}},{key:"onSelectCourse",value:function(){this.props.onCourseTitleSelect(this.state.course.title),this.props.showCourseEditor()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 card-body wbdv-grid"},!this.state.isEditing&&r.a.createElement("div",null,r.a.createElement(f.b,{to:"/course/".concat(this.state.course._id)},r.a.createElement("h5",{className:"card-title",onClick:function(){return e.onSelectCourse()}},this.state.title)),r.a.createElement("div",null,r.a.createElement("i",{className:"fa-2x fa fa-pencil",onClick:function(){return e.onEdit()}}),r.a.createElement("i",{className:"fa-2x fa fa-trash",onClick:function(){return e.deleteCourse()}}))),this.state.isEditing&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"typing-container",value:this.state.title,onChange:function(t){return e.onChange(t)}}),r.a.createElement("i",{className:"fa fa-check fa-2x",onClick:function(){return e.onSaveCourse()}})))}}]),t}(r.a.Component),Se=function(e){var t=e.courses,n=e.saveCourse,a=e.onCourseTitleSelect,s=e.showCourseEditor,i=e.deleteCourse;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h3",null,"Course Grid ",t.length),r.a.createElement("div",{className:"row row-cols-3 card-deck"},t&&t.map((function(e){return r.a.createElement(je,{key:e._id,saveCourse:n,onCourseTitleSelect:a,showCourseEditor:s,deleteCourse:i,course:e})}))))},Ne=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isEditing:!1,title:e.course.title,course:e.course},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onSaveCourse",value:function(){var e=Object(ee.a)({},this.state.course,{title:this.state.title});this.props.saveCourse(e,this.state.course._id),this.setState({isEditing:!1})}},{key:"onChange",value:function(e){this.setState({title:e.target.value})}},{key:"onEdit",value:function(){this.setState({isEditing:!0})}},{key:"deleteCourse",value:function(){this.props.deleteCourse(this.state.course),this.setState({title:"",course:null})}},{key:"onSelectCourse",value:function(){this.props.onCourseTitleSelect(this.state.course.title),this.props.showCourseEditor()}},{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"list-group-item ".concat(this.props.isSelected?"active":""),onClick:function(){return e.props.onHighlight(e.props.course._id)}},!this.state.isEditing&&r.a.createElement("div",null,r.a.createElement(f.b,{to:"/course/".concat(this.state.course._id)},this.props.isSelected&&r.a.createElement("text",{className:"wbdv-selected",onClick:function(){return e.onSelectCourse()}},this.state.title),!this.props.isSelected&&r.a.createElement("text",{onClick:function(){return e.onSelectCourse()}},this.state.title)),r.a.createElement("span",{className:"wbdv-icon float-right"},r.a.createElement("i",{className:"fa-2x fa fa-pencil",onClick:function(){return e.onEdit()}}),r.a.createElement("i",{className:"fa-2x fa fa-trash",onClick:function(){return e.deleteCourse()}}))),this.state.isEditing&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"typing-container",value:this.state.title,onChange:function(t){return e.onChange(t)}}),r.a.createElement("i",{className:"fa fa-check fa-2x",onClick:function(){return e.onSaveCourse()}})))}}]),t}(r.a.Component),Ie=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={highlightedCourseId:null},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onHighlight",value:function(e){this.setState({highlightedCourseId:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h3",null,"Course Table ",this.props.courses.length),r.a.createElement("ul",{className:"list-group"},this.props.courses&&this.props.courses.map((function(t){return r.a.createElement(Ne,{key:t._id,saveCourse:e.props.saveCourse,isSelected:t._id===e.state.highlightedCourseId,onHighlight:e.onHighlight.bind(e),onCourseTitleSelect:e.props.onCourseTitleSelect,showCourseEditor:e.props.showCourseEditor,deleteCourse:e.props.deleteCourse,course:t})}))))}}]),t}(r.a.Component),Te=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark text-white wbdv-margin-below wbdv-nav"},r.a.createElement("div",{className:"pr-3"},r.a.createElement("span",{className:"navbar-toggler-icon wbdv-field wbdv-hamburger"})),r.a.createElement("text",{className:"pr-2 wbdv-nav-title wbdv-label wbdv-course-manager"},"Course Manager"))},Le=function(e){var t=e.updateFormState,n=e.addCourse,a=e.toggle;return r.a.createElement("div",{id:"wbdv-search",className:"form-inline my-1 my-lg-0"},r.a.createElement("div",null,r.a.createElement("input",{id:"wbdv-search-bar",className:"form-control mr-lg-2 wbdv-placeholder wbdv-field wbdv-new-course",onChange:function(e){return t(e)},placeholder:"New Course","aria-label":"Search"}),r.a.createElement("i",{onClick:function(){return n()},className:"fa fa-plus-circle fa-3x wbdv-add"})),r.a.createElement("i",{onClick:function(){return a()},className:"fa fa-th fa-lg fa-3x wbdv-button wbdv-grid-layout"}))},De=function(e){var t=e.layout,n=e.saveCourse,a=e.onCourseTitleSelect,s=e.updateFormState,i=e.addCourse,o=e.toggle,c=e.courses,u=e.showCourseEditor,l=e.deleteCourse;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(Te,null),r.a.createElement(Le,{updateFormState:s,addCourse:i,toggle:o}),"table"===t&&r.a.createElement(Ie,{courses:c,saveCourse:n,onCourseTitleSelect:a,showCourseEditor:u,deleteCourse:l}),"grid"===t&&r.a.createElement(Se,{courses:c,saveCourse:n,onCourseTitleSelect:a,showCourseEditor:u,deleteCourse:l}))},We=new w,_e=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={layout:"table",editingCourse:!1,selectedCourseTitle:null,newCourseTitle:"New Course",courses:[]},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateCourses()}},{key:"updateCourses",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.findAllCourses();case 2:t=e.sent,this.setState({courses:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.createCourse({title:this.state.newCourseTitle});case 2:this.updateCourses();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.updateCourse(t,n);case 2:return e.next=4,this.updateCourses();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onCourseTitleSelect",value:function(e){this.setState({selectedCourseTitle:e})}},{key:"deleteCourse",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.deleteCourse(t._id);case 2:return e.next=4,We.findAllCourses();case 4:n=e.sent,this.setState({courses:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggle",value:function(){this.setState((function(e){return{layout:"grid"===e.layout?"table":"grid"}}))}},{key:"updateFormState",value:function(e){this.setState({newCourseTitle:e.target.value})}},{key:"showCourseEditor",value:function(){this.setState({editingCourse:!0})}},{key:"hideCourseEditor",value:function(){this.setState({editingCourse:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(f.a,null,r.a.createElement(v.a,{path:"/course/:courseId",exact:!0,render:function(t){return r.a.createElement(xe,Object.assign({},t,{courseTitle:e.state.selectedCourseTitle,courseId:t.match.params.courseId,hideCourseEditor:e.hideCourseEditor.bind(e)}))}}),r.a.createElement(v.a,{path:"/course/:courseId/module/:moduleId",exact:!0,render:function(t){return r.a.createElement(xe,Object.assign({},t,{courseTitle:e.state.selectedCourseTitle,moduleId:t.match.params.moduleId,courseId:t.match.params.courseId,hideCourseEditor:e.hideCourseEditor.bind(e)}))}}),r.a.createElement(v.a,{path:"/course/:courseId/module/:moduleId/lesson/:lessonId",exact:!0,render:function(t){return r.a.createElement(xe,Object.assign({},t,{courseTitle:e.state.selectedCourseTitle,lessonId:t.match.params.lessonId,moduleId:t.match.params.moduleId,courseId:t.match.params.courseId,hideCourseEditor:e.hideCourseEditor.bind(e)}))}}),r.a.createElement(v.a,{path:"/course/:courseId/module/:moduleId/lesson/:lessonId/topic/:topicId",exact:!0,render:function(t){return r.a.createElement(xe,Object.assign({},t,{courseTitle:e.state.selectedCourseTitle,topicId:t.match.params.topicId,lessonId:t.match.params.lessonId,moduleId:t.match.params.moduleId,courseId:t.match.params.courseId,hideCourseEditor:e.hideCourseEditor.bind(e)}))}}),r.a.createElement(v.a,{path:"/",exact:!0,render:function(){return r.a.createElement(De,{layout:e.state.layout,saveCourse:e.saveCourse.bind(e),onCourseTitleSelect:e.onCourseTitleSelect.bind(e),updateFormState:e.updateFormState.bind(e),addCourse:e.addCourse.bind(e),toggle:e.toggle.bind(e),courses:e.state.courses,showCourseEditor:e.showCourseEditor.bind(e),deleteCourse:e.deleteCourse.bind(e)})}})))}}]),t}(r.a.Component),Pe=function(e){e.message,e.a,e.b;return r.a.createElement(_e,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Pe,{a:2,b:3,message:"This is the message"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.33bd71f5.chunk.js.map