{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{connect}from\"react-redux\";import'../../node_modules/bootstrap/dist/css/bootstrap.css';import'../../node_modules/font-awesome/css/font-awesome.min.css';import'../components/CourseEditor/CourseEditor.css';import'../components/CourseManager/CourseManager.css';import{createModule as _createModule,deleteModule as _deleteModule,findAllModulesForCourse as _findAllModulesForCourse,updateModule as _updateModule}from'../actions/moduleActions';import ModuleService from'../services/ModuleService';import ModuleListItemComponent from'../components/CourseEditor/ModuleListItemComponent';var service=new ModuleService();var ModuleListContainer=/*#__PURE__*/function(_React$Component){_inherits(ModuleListContainer,_React$Component);function ModuleListContainer(props){var _this;_classCallCheck(this,ModuleListContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(ModuleListContainer).call(this,props));_this.state={selectedModuleId:props.curModuleId,modules:[]};return _this;}_createClass(ModuleListContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateModules();}},{key:\"updateModules\",value:function(){var _updateModules=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var modules;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return service.findModulesForCourse(this.props.courseId);case 2:modules=_context.sent;this.setState({modules:modules});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function updateModules(){return _updateModules.apply(this,arguments);}return updateModules;}()},{key:\"addModule\",value:function(){var _addModule=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.props.createModule(this.props.courseId);case 2:_context2.next=4;return this.updateModules();case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function addModule(){return _addModule.apply(this,arguments);}return addModule;}()},{key:\"onSelect\",value:function onSelect(moduleId){this.setState({selectedModuleId:moduleId});this.props.history.push(\"/course/\".concat(this.props.courseId,\"/module/\").concat(moduleId));}},{key:\"onDelete\",value:function(){var _onDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(moduleId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({selectedModuleId:moduleId});_context3.next=3;return this.props.deleteModule(moduleId);case 3:_context3.next=5;return this.updateModules();case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function onDelete(_x){return _onDelete.apply(this,arguments);}return onDelete;}()},{key:\"onSave\",value:function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(moduleId,newModule){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.props.updateModule(moduleId,newModule);case 2:_context4.next=4;return this.updateModules();case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function onSave(_x2,_x3){return _onSave.apply(this,arguments);}return onSave;}()},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"ul\",{className:\"list-group\"},this.state.modules&&this.state.modules.map(function(module){return React.createElement(ModuleListItemComponent,{key:module._id,isSelected:module._id===_this2.state.selectedModuleId,module:module,onSelect:_this2.onSelect.bind(_this2,module._id),onDelete:_this2.onDelete.bind(_this2,module._id),onSave:_this2.onSave.bind(_this2,module._id)});})),React.createElement(\"i\",{className:\"fa fa-plus-circle fa-3x wbdv-add\",onClick:function onClick(){return _this2.addModule();}}));}}]);return ModuleListContainer;}(React.Component);var stateToPropertyMapper=function stateToPropertyMapper(state){return{modules:state.modules.modules};};var dispatchToPropertyMapper=function dispatchToPropertyMapper(dispatch){return{createModule:function createModule(courseId){return service.createModule(courseId,{title:'New module'}).then(function(actualModule){return dispatch(_createModule(actualModule,courseId));});},findAllModulesForCourse:function findAllModulesForCourse(courseId){return service.findModulesForCourse(courseId).then(function(actualModules){return dispatch(_findAllModulesForCourse(actualModules));});},updateModule:function updateModule(moduleId,module){return service.updateModule(moduleId,module).then(function(updatedModule){return dispatch(_updateModule(updatedModule));});},deleteModule:function deleteModule(moduleId){return service.deleteModule(moduleId).then(function(status){return dispatch(_deleteModule(moduleId));});}};};export default connect(stateToPropertyMapper,dispatchToPropertyMapper)(ModuleListContainer);","map":{"version":3,"sources":["/Users/mocaa7/src/git-website/src/containers/ModuleListContainer.js"],"names":["React","connect","createModule","deleteModule","findAllModulesForCourse","updateModule","ModuleService","ModuleListItemComponent","service","ModuleListContainer","props","state","selectedModuleId","curModuleId","modules","updateModules","findModulesForCourse","courseId","setState","moduleId","history","push","newModule","map","module","_id","onSelect","bind","onDelete","onSave","addModule","Component","stateToPropertyMapper","dispatchToPropertyMapper","dispatch","title","then","actualModule","actualModules","updatedModule","status"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {connect} from \"react-redux\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.css'\nimport '../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../components/CourseEditor/CourseEditor.css';\nimport '../components/CourseManager/CourseManager.css';\nimport {createModule, deleteModule, findAllModulesForCourse, updateModule} from '../actions/moduleActions'\nimport ModuleService from '../services/ModuleService';\nimport ModuleListItemComponent from '../components/CourseEditor/ModuleListItemComponent';\n\nconst service = new ModuleService();\n\nclass ModuleListContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedModuleId: props.curModuleId,\n      modules: [],\n    };\n  }\n\n  componentDidMount() {\n    this.updateModules();\n  }\n\n  async updateModules() {\n    const modules = await service.findModulesForCourse(this.props.courseId);\n    this.setState({modules: modules});\n  }\n\n  async addModule() {\n    await this.props.createModule(this.props.courseId);\n    await this.updateModules();\n  }\n\n  onSelect(moduleId) {\n    this.setState({selectedModuleId: moduleId});\n    this.props.history.push(`/course/${this.props.courseId}/module/${moduleId}`);\n  }\n\n  async onDelete(moduleId) {\n    this.setState({selectedModuleId: moduleId});\n    await this.props.deleteModule(moduleId);\n    await this.updateModules();\n  }\n\n  async onSave(moduleId, newModule) {\n    await this.props.updateModule(moduleId, newModule);\n    await this.updateModules();\n  }\n\n\n  render() {\n    return (\n      <div>\n        <ul className=\"list-group\">\n            {this.state.modules && this.state.modules.map(module =>\n              <ModuleListItemComponent\n                key={module._id}\n                isSelected={module._id === this.state.selectedModuleId}\n                module={module}\n                onSelect={this.onSelect.bind(this, module._id)}\n                onDelete={this.onDelete.bind(this, module._id)}\n                onSave={this.onSave.bind(this, module._id)}/>\n            )}\n        </ul>\n        <i className=\"fa fa-plus-circle fa-3x wbdv-add\"\n          onClick={() => this.addModule()}/>\n      </div>\n    );\n  }\n}\n\nconst stateToPropertyMapper = (state) => {\n  return {modules: state.modules.modules}\n};\n\nconst dispatchToPropertyMapper = (dispatch) => {\n  return {\n    createModule: (courseId) =>\n      service.createModule(courseId, {title: 'New module'})\n      .then(actualModule =>\n          dispatch(createModule(actualModule, courseId))),\n\n    findAllModulesForCourse: (courseId) =>\n      service.findModulesForCourse(courseId)\n      .then(actualModules =>\n          dispatch(findAllModulesForCourse(actualModules))),\n\n    updateModule: (moduleId, module) =>\n      service.updateModule(moduleId, module)\n      .then(updatedModule =>\n          dispatch(updateModule(updatedModule))),\n\n    deleteModule: (moduleId) =>\n      service.deleteModule(moduleId)\n      .then(status =>\n          dispatch(deleteModule(moduleId)))\n  }\n};\n\nexport default connect(\n    stateToPropertyMapper,\n    dispatchToPropertyMapper)\n(ModuleListContainer)"]},"metadata":{},"sourceType":"module"}