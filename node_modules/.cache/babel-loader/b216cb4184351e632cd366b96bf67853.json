{"ast":null,"code":"import React from \"react\";\nimport { connect } from \"react-redux\";\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.css';\nimport '../../../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../../CourseEditor/CourseEditor.css';\nimport { createTopic, deleteTopic, findAllTopicsForLesson, updateTopic } from '../../../actions/topicActions';\nimport TopicPillItem from \"./TopicPillItem\";\nimport TopicService from '../../../services/TopicService';\nconst service = new TopicService();\n\nclass TopicPillComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedLessonId: null,\n      lessons: []\n    };\n  }\n\n  componentDidMount() {\n    this.updateLessons();\n  }\n\n  async updateLessons() {\n    const lessons = await service.findLessonsForModule(this.props.moduleId);\n    this.setState({\n      lessons: lessons\n    });\n  }\n\n  async addLesson() {\n    await this.props.createLesson(this.props.moduleId);\n    this.updateLessons();\n  }\n\n  onSelect(lessonId) {\n    this.setState({\n      selectedLessonId: lessonId\n    });\n    this.props.history.push(`/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${lessonId}`);\n  }\n\n  async onDelete(lessonId) {\n    this.setState({\n      selectedLessonId: lessonId\n    });\n    await this.props.deleteLesson(lessonId);\n    await this.updateLessons();\n  }\n\n  async onSave(lessonId, newLesson) {\n    console.log(`Saving module ${lessonId} with content ${JSON.stringify(newLesson)}`);\n    await this.props.updateLesson(lessonId, newLesson);\n    await this.updateLessons();\n  }\n\n} // const TopicPillComponent = (topics) =>\n//   <p>{JSON.stringify(topics)}</p>;\n//       // <ul class=\"nav nav-pills wbdv-margin-below wbdv-topic-pill\">\n//       //   {topics.map(topic =>\n//       //       <TopicPillItem key={topic._id} topic={topic}/>\n//       //   )}\n//       //   <a id=\"wbdv-topic-add-btn\" className=\"fa fa-plus-circle pt-1 fa-2x\"\n//       //      onClick=\"window.location.href = '#';\">\n//       //   </a>\n//       // </ul>;\n// // export default TopicPillComponent;\n\n\nconst stateToPropertyMapper = state => {\n  return {\n    topics: state.topics.topics\n  };\n};\n\nconst dispatchToPropertyMapper = dispatch => {\n  return {\n    createTopic: lessonId => topicService.createTopic(lessonId, {\n      title: 'New topic'\n    }).then(actualTopic => dispatch(createTopic(actualTopic, lessonId))),\n    findAllTopicsForLesson: lessonId => topicService.findtopicsForLesson(lessonId).then(actualTopics => dispatch(findAllTopicsForLesson(actualTopics))),\n    updateTopic: (topicId, topic) => topicService.updateTopic(topicId, topic).then(updatedTopic => dispatch(updateTopic(updatedTopic))),\n    deleteTopic: topicId => topicService.deleteTopic(topicId).then(status => dispatch(deleteTopic(topicId)))\n  };\n};\n\nexport default connect(stateToPropertyMapper, dispatchToPropertyMapper)(TopicPillComponent);","map":{"version":3,"sources":["/Users/mocaa7/src/mocaa7/cs5610/wbdv-sp-20-mocaa7-client-react/src/components/CourseEditor/Topics/TopicPillComponent.js"],"names":["React","connect","createTopic","deleteTopic","findAllTopicsForLesson","updateTopic","TopicPillItem","TopicService","service","TopicPillComponent","Component","state","selectedLessonId","lessons","componentDidMount","updateLessons","findLessonsForModule","props","moduleId","setState","addLesson","createLesson","onSelect","lessonId","history","push","courseId","onDelete","deleteLesson","onSave","newLesson","console","log","JSON","stringify","updateLesson","stateToPropertyMapper","topics","dispatchToPropertyMapper","dispatch","topicService","title","then","actualTopic","findtopicsForLesson","actualTopics","topicId","topic","updatedTopic","status"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {connect} from \"react-redux\";\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.css'\nimport '../../../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../../CourseEditor/CourseEditor.css'\nimport {createTopic, deleteTopic, findAllTopicsForLesson, updateTopic} from '../../../actions/topicActions'\nimport TopicPillItem from \"./TopicPillItem\";\nimport TopicService from '../../../services/TopicService'\n\nconst service = new TopicService();\n\nclass TopicPillComponent extends React.Component {\n  state = {\n    selectedLessonId: null,\n    lessons: [],\n  };\n\n  componentDidMount() {\n    this.updateLessons();\n  }\n\n  async updateLessons() {\n    const lessons = await service.findLessonsForModule(this.props.moduleId);\n    this.setState({lessons: lessons});\n  }\n\n  async addLesson() {\n    await this.props.createLesson(this.props.moduleId);\n    this.updateLessons();\n  }\n\n  onSelect(lessonId) {\n    this.setState({selectedLessonId: lessonId});\n    this.props.history.push(`/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${lessonId}`);\n  }\n\n  async onDelete(lessonId) {\n    this.setState({selectedLessonId: lessonId});\n    await this.props.deleteLesson(lessonId);\n    await this.updateLessons();\n  }\n\n  async onSave(lessonId, newLesson) {\n    console.log(`Saving module ${lessonId} with content ${JSON.stringify(newLesson)}`);\n    await this.props.updateLesson(lessonId, newLesson);\n    await this.updateLessons();\n  }\n\n}\n\n// const TopicPillComponent = (topics) =>\n//   <p>{JSON.stringify(topics)}</p>;\n//       // <ul class=\"nav nav-pills wbdv-margin-below wbdv-topic-pill\">\n//       //   {topics.map(topic =>\n//       //       <TopicPillItem key={topic._id} topic={topic}/>\n//       //   )}\n//       //   <a id=\"wbdv-topic-add-btn\" className=\"fa fa-plus-circle pt-1 fa-2x\"\n//       //      onClick=\"window.location.href = '#';\">\n//       //   </a>\n//       // </ul>;\n\n// // export default TopicPillComponent;\n\n\nconst stateToPropertyMapper = (state) => {\n  return {\n      topics: state.topics.topics\n  }\n}\n\nconst dispatchToPropertyMapper = (dispatch) => {\n  return {\n      createTopic: (lessonId) =>\n          topicService.createTopic(lessonId, {title: 'New topic'})\n          .then(actualTopic =>\n              dispatch(createTopic(actualTopic, lessonId))),\n\n      findAllTopicsForLesson: (lessonId) =>\n          topicService.findtopicsForLesson(lessonId)\n          .then(actualTopics =>\n              dispatch(findAllTopicsForLesson(actualTopics))),\n\n      updateTopic: (topicId, topic) =>\n          topicService.updateTopic(topicId, topic)\n          .then(updatedTopic =>\n              dispatch(updateTopic(updatedTopic))),\n\n      deleteTopic: (topicId) =>\n          topicService.deleteTopic(topicId)\n          .then(status =>\n              dispatch(deleteTopic(topicId)))\n  }\n}\n\nexport default connect(\n  stateToPropertyMapper,\n  dispatchToPropertyMapper)\n(TopicPillComponent)\n\n"]},"metadata":{},"sourceType":"module"}