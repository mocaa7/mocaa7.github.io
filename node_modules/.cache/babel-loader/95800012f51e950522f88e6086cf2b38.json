{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{connect}from\"react-redux\";import'../../node_modules/bootstrap/dist/css/bootstrap.css';import'../../node_modules/font-awesome/css/font-awesome.min.css';import'../components/CourseEditor/CourseEditor.css';import'../components/CourseManager/CourseManager.css';import{createLesson as _createLesson,deleteLesson as _deleteLesson,findAllLessonsForModule as _findAllLessonsForModule,updateLesson as _updateLesson}from'../actions/lessonActions';import LessonService from'../services/LessonService';import LessonTabItemComponent from'../components/CourseEditor/LessonTabItemComponent';var service=new LessonService();var LessonTabContainer=/*#__PURE__*/function(_React$Component){_inherits(LessonTabContainer,_React$Component);function LessonTabContainer(props){var _this;_classCallCheck(this,LessonTabContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(LessonTabContainer).call(this,props));_this.state={selectedLessonId:props.curLessonId,lessons:[]};return _this;}_createClass(LessonTabContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateLessons();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.moduleId!==this.props.moduleId){this.updateLessons();}}},{key:\"updateLessons\",value:function(){var _updateLessons=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var lessons;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return service.findLessonsForModule(this.props.moduleId);case 2:lessons=_context.sent;this.setState({lessons:lessons});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function updateLessons(){return _updateLessons.apply(this,arguments);}return updateLessons;}()},{key:\"addLesson\",value:function(){var _addLesson=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.props.createLesson(this.props.moduleId);case 2:this.updateLessons();case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function addLesson(){return _addLesson.apply(this,arguments);}return addLesson;}()},{key:\"onSelect\",value:function onSelect(lessonId){this.setState({selectedLessonId:lessonId});this.props.history.push(\"/course/\".concat(this.props.courseId,\"/module/\").concat(this.props.moduleId,\"/lesson/\").concat(lessonId));}},{key:\"onDelete\",value:function(){var _onDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(lessonId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({selectedLessonId:lessonId});_context3.next=3;return this.props.deleteLesson(lessonId);case 3:_context3.next=5;return this.updateLessons();case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function onDelete(_x){return _onDelete.apply(this,arguments);}return onDelete;}()},{key:\"onSave\",value:function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(lessonId,newLesson){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.props.updateLesson(lessonId,newLesson);case 2:_context4.next=4;return this.updateLessons();case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function onSave(_x2,_x3){return _onSave.apply(this,arguments);}return onSave;}()},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"ul\",{className:\"nav nav-tabs wbdv-margin-below wbdv-category\"},this.state.lessons&&this.state.lessons.map(function(lesson){return React.createElement(LessonTabItemComponent,{key:lesson._id,isSelected:lesson._id===_this2.state.selectedLessonId,lesson:lesson,onSelect:_this2.onSelect.bind(_this2,lesson._id),onDelete:_this2.onDelete.bind(_this2,lesson._id),onSave:_this2.onSave.bind(_this2,lesson._id)});}),React.createElement(\"li\",{className:\"nav-item\",onClick:function onClick(){return _this2.addLesson();}},React.createElement(\"i\",{className:\"nav-link fa fa-plus-circle fa-2x\"})));}}]);return LessonTabContainer;}(React.Component);var stateToPropertyMapper=function stateToPropertyMapper(state){return{lessons:state.lessons.lessons};};var dispatchToPropertyMapper=function dispatchToPropertyMapper(dispatch){return{createLesson:function createLesson(moduleId){return service.createLesson(moduleId,{title:'New lesson'}).then(function(actualLesson){return dispatch(_createLesson(actualLesson,moduleId));});},findAllLessonsForModule:function findAllLessonsForModule(moduleId){return service.findLessonsForModule(moduleId).then(function(actualLesson){return dispatch(_findAllLessonsForModule(actualLesson));});},updateLesson:function updateLesson(lessonId,lesson){return service.updateLesson(lessonId,lesson).then(function(updatedLesson){return dispatch(_updateLesson(updatedLesson));});},deleteLesson:function deleteLesson(lessonId){return service.deleteLesson(lessonId).then(function(status){return dispatch(_deleteLesson(lessonId));});}};};export default connect(stateToPropertyMapper,dispatchToPropertyMapper)(LessonTabContainer);","map":{"version":3,"sources":["/Users/mocaa7/src/git-website/src/containers/LessonTabContainer.js"],"names":["React","connect","createLesson","deleteLesson","findAllLessonsForModule","updateLesson","LessonService","LessonTabItemComponent","service","LessonTabContainer","props","state","selectedLessonId","curLessonId","lessons","updateLessons","prevProps","moduleId","findLessonsForModule","setState","lessonId","history","push","courseId","newLesson","map","lesson","_id","onSelect","bind","onDelete","onSave","addLesson","Component","stateToPropertyMapper","dispatchToPropertyMapper","dispatch","title","then","actualLesson","updatedLesson","status"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.css'\nimport '../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../components/CourseEditor/CourseEditor.css';\nimport '../components/CourseManager/CourseManager.css';\nimport {createLesson, deleteLesson, findAllLessonsForModule, updateLesson} from '../actions/lessonActions'\nimport LessonService from '../services/LessonService';\nimport LessonTabItemComponent from '../components/CourseEditor/LessonTabItemComponent';\n\nconst service = new LessonService();\n\nclass LessonTabContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state={\n      selectedLessonId: props.curLessonId,\n      lessons: []\n    }\n  }\n\n  componentDidMount() {\n    this.updateLessons();\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (prevProps.moduleId !== this.props.moduleId) {\n      this.updateLessons();\n    }\n  }\n\n  async updateLessons() {\n    const lessons = await service.findLessonsForModule(this.props.moduleId);\n    this.setState({lessons: lessons});\n  }\n\n  async addLesson() {\n    await this.props.createLesson(this.props.moduleId);\n    this.updateLessons();\n  }\n\n  onSelect(lessonId) {\n    this.setState({selectedLessonId: lessonId});\n    this.props.history.push(`/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${lessonId}`);\n  }\n\n  async onDelete(lessonId) {\n    this.setState({selectedLessonId: lessonId});\n    await this.props.deleteLesson(lessonId);\n    await this.updateLessons();\n  }\n\n  async onSave(lessonId, newLesson) {\n    await this.props.updateLesson(lessonId, newLesson);\n    await this.updateLessons();\n  }\n\n  render() {\n    return (\n      <ul className=\"nav nav-tabs wbdv-margin-below wbdv-category\">\n        {this.state.lessons && this.state.lessons.map(lesson =>\n          <LessonTabItemComponent\n            key={lesson._id}\n            isSelected={lesson._id === this.state.selectedLessonId}\n            lesson={lesson}\n            onSelect={this.onSelect.bind(this, lesson._id)}\n            onDelete={this.onDelete.bind(this, lesson._id)}\n            onSave={this.onSave.bind(this, lesson._id)}/>\n        )}\n        <li className=\"nav-item\" onClick={() => this.addLesson()}>\n            <i className=\"nav-link fa fa-plus-circle fa-2x\"/>\n        </li>\n      </ul>\n    );\n  }\n}\n\nconst stateToPropertyMapper = (state) => {\n  return {lessons: state.lessons.lessons}\n}\n\nconst dispatchToPropertyMapper = (dispatch) => {\n  return {\n    createLesson: (moduleId) =>\n      service.createLesson(moduleId, {title: 'New lesson'})\n      .then(actualLesson =>\n          dispatch(createLesson(actualLesson, moduleId))),\n\n    findAllLessonsForModule: (moduleId) =>\n      service.findLessonsForModule(moduleId)\n      .then(actualLesson =>\n          dispatch(findAllLessonsForModule(actualLesson))),\n\n    updateLesson: (lessonId, lesson) =>\n      service.updateLesson(lessonId, lesson)\n      .then(updatedLesson =>\n          dispatch(updateLesson(updatedLesson))),\n\n    deleteLesson: (lessonId) =>\n      service.deleteLesson(lessonId)\n      .then(status =>\n          dispatch(deleteLesson(lessonId)))\n  }\n};\n\nexport default connect(\n    stateToPropertyMapper,\n    dispatchToPropertyMapper)\n(LessonTabContainer)"]},"metadata":{},"sourceType":"module"}