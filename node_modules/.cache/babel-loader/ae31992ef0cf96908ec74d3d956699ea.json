{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mocaa7/src/git-website/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{connect}from\"react-redux\";import'../../node_modules/bootstrap/dist/css/bootstrap.css';import'../../node_modules/font-awesome/css/font-awesome.min.css';import'../components/CourseEditor/CourseEditor.css';import'../components/CourseManager/CourseManager.css';import{createTopic as _createTopic,deleteTopic as _deleteTopic,findAllTopicsForLesson as _findAllTopicsForLesson,updateTopic as _updateTopic}from'../actions/topicActions';import TopicService from'../services/TopicService';import TopicPillItemComponent from\"../components/CourseEditor/TopicPillItemComponent\";var service=new TopicService();var TopicPillContainer=/*#__PURE__*/function(_React$Component){_inherits(TopicPillContainer,_React$Component);function TopicPillContainer(props){var _this;_classCallCheck(this,TopicPillContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(TopicPillContainer).call(this,props));_this.state={selectedTopicId:props.curTopicId,topics:[]};return _this;}_createClass(TopicPillContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateTopics();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.lessonId!==this.props.lessonId){this.updateTopics();}}},{key:\"updateTopics\",value:function(){var _updateTopics=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var topics;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return service.findTopicsForLesson(this.props.lessonId);case 2:topics=_context.sent;this.setState({topics:topics});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function updateTopics(){return _updateTopics.apply(this,arguments);}return updateTopics;}()},{key:\"addTopic\",value:function(){var _addTopic=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.props.createTopic(this.props.lessonId);case 2:this.updateTopics();case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function addTopic(){return _addTopic.apply(this,arguments);}return addTopic;}()},{key:\"onSelect\",value:function onSelect(topicId){this.setState({selectedTopicId:topicId});this.props.history.push(\"/course/\".concat(this.props.courseId,\"/module/\").concat(this.props.moduleId,\"/lesson/\").concat(this.props.lessonId,\"/topic/\").concat(topicId));}},{key:\"onDelete\",value:function(){var _onDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(topicId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({selectedTopicId:topicId});_context3.next=3;return this.props.deleteTopic(topicId);case 3:_context3.next=5;return this.updateTopics();case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function onDelete(_x){return _onDelete.apply(this,arguments);}return onDelete;}()},{key:\"onSave\",value:function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(topicId,newTopic){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.props.updateTopic(topicId,newTopic);case 2:_context4.next=4;return this.updateTopics();case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function onSave(_x2,_x3){return _onSave.apply(this,arguments);}return onSave;}()},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"ul\",{className:\"nav nav-pills wbdv-margin-below wbdv-category\"},this.state.topics&&this.state.topics.map(function(topic){return React.createElement(TopicPillItemComponent,{key:topic.id,isSelected:topic.id===_this2.state.selectedTopicId,topic:topic,onSelect:_this2.onSelect.bind(_this2,topic.id),onDelete:_this2.onDelete.bind(_this2,topic.id),onSave:_this2.onSave.bind(_this2,topic.id)});}),React.createElement(\"li\",{className:\"nav-item\",onClick:function onClick(){return _this2.addTopic();}},React.createElement(\"i\",{className:\"nav-link fa fa-plus-circle fa-2x\"})));}}]);return TopicPillContainer;}(React.Component);// Receives the entire store state and returns an\n// object of data this component needs\nvar stateToPropertyMapper=function stateToPropertyMapper(state){return{topics:state.topics.topics};};// fetches data from the server\nvar dispatchToPropertyMapper=function dispatchToPropertyMapper(dispatch){return{createTopic:function createTopic(lessonId){return service.createTopic(lessonId).then(function(actualTopic){return dispatch(_createTopic(actualTopic));});},findAllTopicsForLesson:function findAllTopicsForLesson(lessonId){return service.findTopicsForLesson(lessonId).then(function(actualTopics){return dispatch(_findAllTopicsForLesson(actualTopics));});},updateTopic:function updateTopic(topicId,topic){return service.updateTopic(topicId,topic).then(function(updatedTopic){return dispatch(_updateTopic(updatedTopic));});},deleteTopic:function deleteTopic(topicId){return service.deleteTopic(topicId).then(function(status){return dispatch(_deleteTopic(topicId));});}};};export default connect(stateToPropertyMapper,dispatchToPropertyMapper)(TopicPillContainer);","map":{"version":3,"sources":["/Users/mocaa7/src/git-website/src/containers/TopicPillContainer.js"],"names":["React","connect","createTopic","deleteTopic","findAllTopicsForLesson","updateTopic","TopicService","TopicPillItemComponent","service","TopicPillContainer","props","state","selectedTopicId","curTopicId","topics","updateTopics","prevProps","lessonId","findTopicsForLesson","setState","topicId","history","push","courseId","moduleId","newTopic","map","topic","id","onSelect","bind","onDelete","onSave","addTopic","Component","stateToPropertyMapper","dispatchToPropertyMapper","dispatch","then","actualTopic","actualTopics","updatedTopic","status"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {connect} from \"react-redux\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.css'\nimport '../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../components/CourseEditor/CourseEditor.css';\nimport '../components/CourseManager/CourseManager.css';\nimport {createTopic, deleteTopic, findAllTopicsForLesson, updateTopic} from '../actions/topicActions'\nimport TopicService from '../services/TopicService'\nimport TopicPillItemComponent from \"../components/CourseEditor/TopicPillItemComponent\";\n\nconst service = new TopicService();\n\nclass TopicPillContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedTopicId: props.curTopicId,\n      topics: [],\n    };\n  }\n\n  componentDidMount() {\n    this.updateTopics();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.lessonId !== this.props.lessonId) {\n      this.updateTopics();\n    }\n  }\n\n  async updateTopics() {\n    const topics = await service.findTopicsForLesson(this.props.lessonId);\n    this.setState({topics: topics});\n  }\n\n  async addTopic() {\n    await this.props.createTopic(this.props.lessonId);\n    this.updateTopics();\n  }\n\n  onSelect(topicId) {\n    this.setState({selectedTopicId: topicId});\n    this.props.history.push(\n        `/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${this.props.lessonId}/topic/${topicId}`\n    );\n  }\n\n  async onDelete(topicId) {\n    this.setState({selectedTopicId: topicId});\n    await this.props.deleteTopic(topicId);\n    await this.updateTopics();\n  }\n\n  async onSave(topicId, newTopic) {\n    await this.props.updateTopic(topicId, newTopic);\n    await this.updateTopics();\n  }\n\n  render() {\n    return (\n        <ul className=\"nav nav-pills wbdv-margin-below wbdv-category\">\n          {this.state.topics && this.state.topics.map(topic =>\n              <TopicPillItemComponent\n                  key={topic.id}\n                  isSelected={topic.id === this.state.selectedTopicId}\n                  topic={topic}\n                  onSelect={this.onSelect.bind(this, topic.id)}\n                  onDelete={this.onDelete.bind(this, topic.id)}\n                  onSave={this.onSave.bind(this, topic.id)}/>\n          )}\n          <li className=\"nav-item\" onClick={() => this.addTopic()}>\n            <i className=\"nav-link fa fa-plus-circle fa-2x\"/>\n          </li>\n        </ul>\n    );\n  }\n}\n// Receives the entire store state and returns an\n// object of data this component needs\nconst stateToPropertyMapper = (state) => {\n  return {\n    topics: state.topics.topics\n  }\n};\n\n// fetches data from the server\nconst dispatchToPropertyMapper = (dispatch) => {\n  return {\n    createTopic: (lessonId) =>\n        service.createTopic(lessonId)\n        .then(actualTopic => dispatch(createTopic(actualTopic))),\n\n    findAllTopicsForLesson: (lessonId) =>\n        service.findTopicsForLesson(lessonId)\n        .then(actualTopics =>\n            dispatch(findAllTopicsForLesson(actualTopics))),\n\n    updateTopic: (topicId, topic) =>\n        service.updateTopic(topicId, topic)\n        .then(updatedTopic =>\n            dispatch(updateTopic(updatedTopic))),\n\n    deleteTopic: (topicId) =>\n        service.deleteTopic(topicId)\n        .then(status =>\n            dispatch(deleteTopic(topicId)))\n  }\n}\n\nexport default connect(\n    stateToPropertyMapper,\n    dispatchToPropertyMapper)\n(TopicPillContainer)\n\n"]},"metadata":{},"sourceType":"module"}