{"ast":null,"code":"var _jsxFileName = \"/Users/mocaa7/src/mocaa7/cs5610/wbdv-sp-20-mocaa7-client-react/src/containers/TopicPillContainer.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.css';\nimport '../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../components/CourseEditor/CourseEditor.css';\nimport '../components/CourseManager/CourseManager.css';\nimport { createTopic, deleteTopic, findAllTopicsForLesson, updateTopic } from '../actions/topicActions';\nimport TopicPillItemComponent from \"./TopicPillItemComponent\";\nimport TopicService from '../../../services/TopicService';\nimport { createModule, deleteModule, findAllModulesForCourse, updateModule } from '../actions/moduleActions';\nimport ModuleService from '../services/ModuleService';\nimport ModuleListItemComponent from '../components/CourseEditor/Modules/ModuleListItemComponent';\nconst service = new TopicService();\n\nclass TopicPillContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTopicId: props.curTopicId,\n      topics: []\n    };\n  }\n\n  componentDidMount() {\n    this.updateTopics();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.lessonId !== this.props.lessonId) {\n      this.updateTopics();\n    }\n  }\n\n  async updateTopics() {\n    const topics = await service.findTopicsForLesson(this.props.lessonId);\n    this.setState({\n      topics: topics\n    });\n  }\n\n  async addTopic() {\n    await this.props.createTopic(this.props.lessonId);\n    this.updateTopics();\n  }\n\n  onSelect(topicId) {\n    this.setState({\n      selectedTopicId: topicId\n    });\n    this.props.history.push(`/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${this.props.lessonId}/topic/${topicId}`);\n  }\n\n  async onDelete(topicId) {\n    this.setState({\n      selectedTopicId: topicId\n    });\n    await this.props.deleteTopic(topicId);\n    await this.updateTopics();\n  }\n\n  async onSave(topicId, newTopic) {\n    await this.props.updateTopic(topicId, newTopic);\n    await this.updateTopics();\n  }\n\n  render() {\n    return React.createElement(\"ul\", {\n      className: \"nav nav-pills wbdv-margin-below wbdv-category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.state.topics && this.state.topics.map(topic => React.createElement(TopicPillItemComponent, {\n      key: topic.id,\n      isSelected: topic.id === this.state.selectedTopicId,\n      topic: topic,\n      onSelect: this.onSelect.bind(this, topic.id),\n      onDelete: this.onDelete.bind(this, topic.id),\n      onSave: this.onSave.bind(this, topic.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    })), React.createElement(\"li\", {\n      className: \"nav-item\",\n      onClick: () => this.addTopic(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"nav-link fa fa-plus-circle fa-2x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })));\n  }\n\n} // Receives the entire store state and returns an\n// object of data this component needs\n\n\nconst stateToPropertyMapper = state => {\n  return {\n    topics: state.topics.topics\n  };\n}; // fetches data from the server\n\n\nconst dispatchToPropertyMapper = dispatch => {\n  return {\n    createTopic: lessonId => service.createTopic(lessonId).then(actualTopic => dispatch(createTopic(actualTopic))),\n    findAllTopicsForLesson: lessonId => service.findTopicsForLesson(lessonId).then(actualTopics => dispatch(findAllTopicsForLesson(actualTopics))),\n    updateTopic: (topicId, topic) => service.updateTopic(topicId, topic).then(updatedTopic => dispatch(updateTopic(updatedTopic))),\n    deleteTopic: topicId => service.deleteTopic(topicId).then(status => dispatch(deleteTopic(topicId)))\n  };\n};\n\nexport default connect(stateToPropertyMapper, dispatchToPropertyMapper)(TopicPillContainer);","map":{"version":3,"sources":["/Users/mocaa7/src/mocaa7/cs5610/wbdv-sp-20-mocaa7-client-react/src/containers/TopicPillContainer.js"],"names":["React","connect","createTopic","deleteTopic","findAllTopicsForLesson","updateTopic","TopicPillItemComponent","TopicService","createModule","deleteModule","findAllModulesForCourse","updateModule","ModuleService","ModuleListItemComponent","service","TopicPillContainer","Component","constructor","props","state","selectedTopicId","curTopicId","topics","componentDidMount","updateTopics","componentDidUpdate","prevProps","lessonId","findTopicsForLesson","setState","addTopic","onSelect","topicId","history","push","courseId","moduleId","onDelete","onSave","newTopic","render","map","topic","id","bind","stateToPropertyMapper","dispatchToPropertyMapper","dispatch","then","actualTopic","actualTopics","updatedTopic","status"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {connect} from \"react-redux\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.css'\nimport '../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../components/CourseEditor/CourseEditor.css';\nimport '../components/CourseManager/CourseManager.css';\n\nimport {createTopic, deleteTopic, findAllTopicsForLesson, updateTopic} from '../actions/topicActions'\nimport TopicPillItemComponent from \"./TopicPillItemComponent\";\nimport TopicService from '../../../services/TopicService'\n\nimport {createModule, deleteModule, findAllModulesForCourse, updateModule} from '../actions/moduleActions'\nimport ModuleService from '../services/ModuleService';\nimport ModuleListItemComponent from '../components/CourseEditor/Modules/ModuleListItemComponent';\n\nconst service = new TopicService();\n\nclass TopicPillContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedTopicId: props.curTopicId,\n      topics: [],\n    };\n  }\n\n  componentDidMount() {\n    this.updateTopics();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.lessonId !== this.props.lessonId) {\n      this.updateTopics();\n    }\n  }\n\n  async updateTopics() {\n    const topics = await service.findTopicsForLesson(this.props.lessonId);\n    this.setState({topics: topics});\n  }\n\n  async addTopic() {\n    await this.props.createTopic(this.props.lessonId);\n    this.updateTopics();\n  }\n\n  onSelect(topicId) {\n    this.setState({selectedTopicId: topicId});\n    this.props.history.push(\n        `/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${this.props.lessonId}/topic/${topicId}`\n    );\n  }\n\n  async onDelete(topicId) {\n    this.setState({selectedTopicId: topicId});\n    await this.props.deleteTopic(topicId);\n    await this.updateTopics();\n  }\n\n  async onSave(topicId, newTopic) {\n    await this.props.updateTopic(topicId, newTopic);\n    await this.updateTopics();\n  }\n\n  render() {\n    return (\n        <ul className=\"nav nav-pills wbdv-margin-below wbdv-category\">\n          {this.state.topics && this.state.topics.map(topic =>\n              <TopicPillItemComponent\n                  key={topic.id}\n                  isSelected={topic.id === this.state.selectedTopicId}\n                  topic={topic}\n                  onSelect={this.onSelect.bind(this, topic.id)}\n                  onDelete={this.onDelete.bind(this, topic.id)}\n                  onSave={this.onSave.bind(this, topic.id)}/>\n          )}\n          <li className=\"nav-item\" onClick={() => this.addTopic()}>\n            <i className=\"nav-link fa fa-plus-circle fa-2x\"/>\n          </li>\n        </ul>\n    );\n  }\n}\n// Receives the entire store state and returns an\n// object of data this component needs\nconst stateToPropertyMapper = (state) => {\n  return {\n    topics: state.topics.topics\n  }\n};\n\n// fetches data from the server\nconst dispatchToPropertyMapper = (dispatch) => {\n  return {\n    createTopic: (lessonId) =>\n        service.createTopic(lessonId)\n        .then(actualTopic => dispatch(createTopic(actualTopic))),\n\n    findAllTopicsForLesson: (lessonId) =>\n        service.findTopicsForLesson(lessonId)\n        .then(actualTopics =>\n            dispatch(findAllTopicsForLesson(actualTopics))),\n\n    updateTopic: (topicId, topic) =>\n        service.updateTopic(topicId, topic)\n        .then(updatedTopic =>\n            dispatch(updateTopic(updatedTopic))),\n\n    deleteTopic: (topicId) =>\n        service.deleteTopic(topicId)\n        .then(status =>\n            dispatch(deleteTopic(topicId)))\n  }\n}\n\nexport default connect(\n    stateToPropertyMapper,\n    dispatchToPropertyMapper)\n(TopicPillContainer)\n\n"]},"metadata":{},"sourceType":"module"}