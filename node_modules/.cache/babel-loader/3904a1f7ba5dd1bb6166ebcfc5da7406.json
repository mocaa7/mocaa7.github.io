{"ast":null,"code":"var _jsxFileName = \"/Users/mocaa7/src/mocaa7/cs5610/wbdv-sp-20-mocaa7-client-react/src/components/CourseEditor/Topics/TopicPillComponent.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.css';\nimport '../../../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../../CourseEditor/CourseEditor.css';\nimport { createTopic, deleteTopic, findAllTopicsForLesson, updateTopic } from '../../../actions/topicActions';\nimport TopicPillItem from \"./TopicPillItem\";\nimport TopicService from '../../../services/TopicService';\nconst service = new TopicService();\n\nclass TopicPillComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedTopicId: null,\n      topics: []\n    };\n  }\n\n  componentDidMount() {\n    this.updateTopics();\n  }\n\n  async updateTopics() {\n    const topics = await service.findTopicsForLesson(this.props.lessonId);\n    this.setState({\n      topics: topics\n    });\n  }\n\n  async addTopic() {\n    await this.props.createTopic(this.props.lessonId);\n    this.updateTopics();\n  }\n\n  onSelect(topicId) {\n    this.setState({\n      selectedTopicId: topicId\n    });\n    this.props.history.push(`/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${this.props.lessonId}/topic/${topicId}`);\n  }\n\n  async onDelete(topicId) {\n    this.setState({\n      selectedTopicId: topicId\n    });\n    await this.props.deleteTopic(topicId);\n    await this.updateTopics();\n  }\n\n  async onSave(topicId, newTopic) {\n    console.log(`Saving topic ${topicId} with content ${JSON.stringify(newTopic)}`);\n    await this.props.updateTopic(topicId, newTopic);\n    await this.updateTopics();\n  }\n\n  render() {\n    return React.createElement(\"ul\", {\n      className: \"nav nav-pills wbdv-margin-below wbdv-pill\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, this.state.topics && this.state.topics.map(topic => React.createElement(LessonTabItem, {\n      key: lesson._id,\n      isSelected: lesson._id === this.state.selectedLessonId,\n      lesson: lesson,\n      onSelect: this.onSelect.bind(this, lesson._id),\n      onDelete: this.onDelete.bind(this, lesson._id),\n      onSave: this.onSave.bind(this, lesson._id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    })), React.createElement(\"li\", {\n      className: \"nav-item\",\n      onClick: () => this.addLesson(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link fa fa-plus-circle fa-2x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    })));\n  }\n\n} // const TopicPillComponent = (topics) =>\n//   <p>{JSON.stringify(topics)}</p>;\n//       // <ul class=\"nav nav-pills wbdv-margin-below wbdv-topic-pill\">\n//       //   {topics.map(topic =>\n//       //       <TopicPillItem key={topic._id} topic={topic}/>\n//       //   )}\n//       //   <a id=\"wbdv-topic-add-btn\" className=\"fa fa-plus-circle pt-1 fa-2x\"\n//       //      onClick=\"window.location.href = '#';\">\n//       //   </a>\n//       // </ul>;\n// // export default TopicPillComponent;\n\n\nconst stateToPropertyMapper = state => {\n  return {\n    topics: state.topics.topics\n  };\n};\n\nconst dispatchToPropertyMapper = dispatch => {\n  return {\n    createTopic: lessonId => topicService.createTopic(lessonId, {\n      title: 'New topic'\n    }).then(actualTopic => dispatch(createTopic(actualTopic, lessonId))),\n    findAllTopicsForLesson: lessonId => topicService.findtopicsForLesson(lessonId).then(actualTopics => dispatch(findAllTopicsForLesson(actualTopics))),\n    updateTopic: (topicId, topic) => topicService.updateTopic(topicId, topic).then(updatedTopic => dispatch(updateTopic(updatedTopic))),\n    deleteTopic: topicId => topicService.deleteTopic(topicId).then(status => dispatch(deleteTopic(topicId)))\n  };\n};\n\nexport default connect(stateToPropertyMapper, dispatchToPropertyMapper)(TopicPillComponent);","map":{"version":3,"sources":["/Users/mocaa7/src/mocaa7/cs5610/wbdv-sp-20-mocaa7-client-react/src/components/CourseEditor/Topics/TopicPillComponent.js"],"names":["React","connect","createTopic","deleteTopic","findAllTopicsForLesson","updateTopic","TopicPillItem","TopicService","service","TopicPillComponent","Component","state","selectedTopicId","topics","componentDidMount","updateTopics","findTopicsForLesson","props","lessonId","setState","addTopic","onSelect","topicId","history","push","courseId","moduleId","onDelete","onSave","newTopic","console","log","JSON","stringify","render","map","topic","lesson","_id","selectedLessonId","bind","addLesson","stateToPropertyMapper","dispatchToPropertyMapper","dispatch","topicService","title","then","actualTopic","findtopicsForLesson","actualTopics","updatedTopic","status"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {connect} from \"react-redux\";\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.css'\nimport '../../../../node_modules/font-awesome/css/font-awesome.min.css';\nimport '../../CourseEditor/CourseEditor.css'\nimport {createTopic, deleteTopic, findAllTopicsForLesson, updateTopic} from '../../../actions/topicActions'\nimport TopicPillItem from \"./TopicPillItem\";\nimport TopicService from '../../../services/TopicService'\n\nconst service = new TopicService();\n\nclass TopicPillComponent extends React.Component {\n  state = {\n    selectedTopicId: null,\n    topics: [],\n  };\n\n  componentDidMount() {\n    this.updateTopics();\n  }\n\n  async updateTopics() {\n    const topics = await service.findTopicsForLesson(this.props.lessonId);\n    this.setState({topics: topics});\n  }\n\n  async addTopic() {\n    await this.props.createTopic(this.props.lessonId);\n    this.updateTopics();\n  }\n\n  onSelect(topicId) {\n    this.setState({selectedTopicId: topicId});\n    this.props.history.push(\n      `/course/${this.props.courseId}/module/${this.props.moduleId}/lesson/${this.props.lessonId}/topic/${topicId}`\n    );\n  }\n\n  async onDelete(topicId) {\n    this.setState({selectedTopicId: topicId});\n    await this.props.deleteTopic(topicId);\n    await this.updateTopics();\n  }\n\n  async onSave(topicId, newTopic) {\n    console.log(`Saving topic ${topicId} with content ${JSON.stringify(newTopic)}`);\n    await this.props.updateTopic(topicId, newTopic);\n    await this.updateTopics();\n  }\n\n  render() {\n    return (\n      <ul className=\"nav nav-pills wbdv-margin-below wbdv-pill\">\n        {this.state.topics && this.state.topics.map(topic =>\n          <LessonTabItem\n            key={lesson._id}\n            isSelected={lesson._id === this.state.selectedLessonId}\n            lesson={lesson}\n            onSelect={this.onSelect.bind(this, lesson._id)}\n            onDelete={this.onDelete.bind(this, lesson._id)}\n            onSave={this.onSave.bind(this, lesson._id)}/>\n        )}\n        <li className=\"nav-item\" onClick={() => this.addLesson()}>\n            <a className=\"nav-link fa fa-plus-circle fa-2x\"/>\n        </li>\n      </ul>\n    );\n  }\n\n}\n\n// const TopicPillComponent = (topics) =>\n//   <p>{JSON.stringify(topics)}</p>;\n//       // <ul class=\"nav nav-pills wbdv-margin-below wbdv-topic-pill\">\n//       //   {topics.map(topic =>\n//       //       <TopicPillItem key={topic._id} topic={topic}/>\n//       //   )}\n//       //   <a id=\"wbdv-topic-add-btn\" className=\"fa fa-plus-circle pt-1 fa-2x\"\n//       //      onClick=\"window.location.href = '#';\">\n//       //   </a>\n//       // </ul>;\n\n// // export default TopicPillComponent;\n\n\nconst stateToPropertyMapper = (state) => {\n  return {\n      topics: state.topics.topics\n  }\n}\n\nconst dispatchToPropertyMapper = (dispatch) => {\n  return {\n      createTopic: (lessonId) =>\n          topicService.createTopic(lessonId, {title: 'New topic'})\n          .then(actualTopic =>\n              dispatch(createTopic(actualTopic, lessonId))),\n\n      findAllTopicsForLesson: (lessonId) =>\n          topicService.findtopicsForLesson(lessonId)\n          .then(actualTopics =>\n              dispatch(findAllTopicsForLesson(actualTopics))),\n\n      updateTopic: (topicId, topic) =>\n          topicService.updateTopic(topicId, topic)\n          .then(updatedTopic =>\n              dispatch(updateTopic(updatedTopic))),\n\n      deleteTopic: (topicId) =>\n          topicService.deleteTopic(topicId)\n          .then(status =>\n              dispatch(deleteTopic(topicId)))\n  }\n}\n\nexport default connect(\n  stateToPropertyMapper,\n  dispatchToPropertyMapper)\n(TopicPillComponent)\n\n"]},"metadata":{},"sourceType":"module"}